PART
{
	name = asbury_kistler-LES
	module = Part
	author = EStreetRockets
	MODEL
	{
		model =  Asbury/Parts/Kistler/asbury_kistler-LES
		rotation = 0, 0, 0
	}
	scale = 1
	rescaleFactor = 1
	attachRules = 0,1,0,0,0
	node_attach = 0.0, 0.0, 0.0, 0.0, 0.0, -1.0

	TechRequired = heavyRocketry
	entryCost = 970
	cost = 185

	category = Engine
	subcategory = 0
	title = Ramrod Launch Escape System Motor
	manufacturer = Asbury Western Stars Industries
	description = This solid rocket motor can push the crew capsule away from the Ramrod-1 vehicle in the event of a abort. During a nominal flight, two motors are fired shortly after OV separation, and the final two are fired to assist with orbital insertion.
	stagingIcon = SOLID_BOOSTER

	mass = .065
    bulkheadProfiles = srf

	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.3
	angularDrag = 2

	crashTolerance = 6
	breakingForce = 200
	breakingTorque = 200

    maxTemp = 2000
	heatConductivity = 0.06
	emissiveConstant = 0.8
	
	tags = kistler asbury k1 k-1 launch escape abort ramrod

    EFFECTS
	{
		running_solid
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_hard
				volume = 0.0 0.0
				volume = 1.0 1.5
				pitch = 0.0 0.2
				pitch = 1.0 0.8
				loop = true
			}

			MODEL_MULTI_PARTICLE
			{
				name = blaze
				modelName = Asbury/FX/PlumeParty/Engines/Solid/OMSBlaze
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.2 0.1
				emission = 0.8 1.0
				speed = 0.0 0.5
				speed = 0.5 1.0
				energy = 0.0 0.0
				energy = 0.5 1.0
				localScale = 0.4,0.4,0.4
				localPosition = 0,0,0.19
			}

			MODEL_MULTI_PARTICLE
			{
				name = chunk
				modelName = Asbury/FX/PlumeParty/Engines/Solid/OMSChunks
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.5 1.5
				emission = 1.0 1.0
				speed = 0.2 0.2
				speed = 1.0 1.0
				energy = 0.0 0.5
				energy = 0.5 1.0
				localScale = 0.4,0.4,0.4
				localPosition = 0,0,0.21
			}

            
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				volume = 1.0
				pitch = 1.0
				loop = false
			}
		}
		disengage
		{
			PREFAB_MULTI_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
				localScale = 0.15,0.15,0.15
				localOffset = 0,0,0.08
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.5
				pitch = 0.8
				loop = false
			}
		}
		flameout
		{
			PREFAB_MULTI_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = thrustTransform
				oneShot = true
				localScale = 0.15,0.15,0.15
				localOffset = 0,0,0.08
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.5
				pitch = 0.8
				loop = false
			}
		}
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		throttleLocked = True
		exhaustDamage = True
		allowShutdown = False
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 125
        heatProduction = 200
		EngineType = SolidBooster
		powerEffectName = running_solid
		PROPELLANT
		{
			name = SolidFuel
			ratio = 1.4
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 154
			key = 1 118
			key = 6 0.001
		}
		exhaustDamageMultiplier = 200
	}
	RESOURCE
	{
		name = SolidFuel
		amount = 14
		maxAmount = 14
	}
	MODULE
	{
		name = ModuleGimbal
		gimbalResponseSpeed = 15
		useGimbalResponseSpeed = true
		gimbalTransformName = gimbalTransform
		gimbalRangeXN = 8
		gimbalRangeXP = 8
		gimbalRangeYN = 8
		gimbalRangeYP = 8
	}
    MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 0
		fxMax = 0.8
		maxDistance = 14
		falloff = 1.8
		thrustTransformName = thrustTransform
	}
	MODULE
    {
        name = FXModuleThrottleEffects
        fxModuleNames = heatColor
        responseSpeed = 1
        dependOnEngineState = True
        dependOnThrottle = True
    }
    MODULE
    {
        name = ModuleColorChanger
        moduleID = heatColor
        animRate = .4
        shaderProperty = _EmissiveColor
        toggleInEditor = false
        toggleInFlight = false
        redCurve
        {
            key = 0 0 1 1
            key = 1 1 1 1
        }
        greenCurve
        {
            key = 0 0 1 1
            key = 1 1 1 1
        }
        blueCurve
        {
            key = 0 0 1 1
            key = 1 1 1 1
        }
        alphaCurve
        {
            key = 0 0 1 1
            key = 1 1 1 1
        }
    }
}